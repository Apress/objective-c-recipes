<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>API: AppKit/CPColor.j Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">API&#160;<span id="projectnumber">0.9.5</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_c_p_color_8j.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">AppKit/CPColor.j</div>  </div>
</div>
<div class="contents">
<a href="_c_p_color_8j.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * CPColor.j</span>
<a name="l00003"></a>00003 <span class="comment"> * AppKit</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Created by Francisco Tolmasky.</span>
<a name="l00006"></a>00006 <span class="comment"> * Copyright 2008, 280 North, Inc.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00010"></a>00010 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00011"></a>00011 <span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span>
<a name="l00016"></a>00016 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00019"></a>00019 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 var _redComponent        = 0,
<a name="l00029"></a>00029     _greenComponent      = 1,
<a name="l00030"></a>00030     _blueComponent       = 2,
<a name="l00031"></a>00031     _alphaCompnent       = 3;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 var _hueComponent        = 0,
<a name="l00034"></a>00034     _saturationComponent = 1,
<a name="l00035"></a>00035     _brightnessComponent = 2;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 var cachedBlackColor,
<a name="l00038"></a>00038     cachedRedColor,
<a name="l00039"></a>00039     cachedGreenColor,
<a name="l00040"></a>00040     cachedBlueColor,
<a name="l00041"></a>00041     cachedYellowColor,
<a name="l00042"></a>00042     cachedGrayColor,
<a name="l00043"></a>00043     cachedLightGrayColor,
<a name="l00044"></a>00044     cachedDarkGrayColor,
<a name="l00045"></a>00045     cachedWhiteColor,
<a name="l00046"></a>00046     cachedBrownColor,
<a name="l00047"></a>00047     cachedCyanColor,
<a name="l00048"></a>00048     cachedMagentaColor,
<a name="l00049"></a>00049     cachedOrangeColor,
<a name="l00050"></a>00050     cachedPurpleColor,
<a name="l00051"></a>00051     cachedShadowColor,
<a name="l00052"></a>00052     cachedClearColor;
<a name="l00053"></a>00053 
<a name="l00055"></a>00055 
<a name="l00059"></a><a class="code" href="_c_p_color_8j.html#a49e1857d611d9ddf6c0de040c7e25416">00059</a> <a class="code" href="_c_p_color_8j.html#a49e1857d611d9ddf6c0de040c7e25416">CPColorPatternIsVertical</a> = YES;
<a name="l00060"></a>00060 
<a name="l00064"></a><a class="code" href="_c_p_color_8j.html#a6a3a6ea559bd16018cf4baaf3b9cf5e6">00064</a> <a class="code" href="_c_p_color_8j.html#a6a3a6ea559bd16018cf4baaf3b9cf5e6">CPColorPatternIsHorizontal</a> = NO;
<a name="l00065"></a>00065 
<a name="l00085"></a><a class="code" href="_c_p_color_8j.html#a10fc91fed991c3435af7c6fa20af0dbd">00085</a> function <a class="code" href="_c_p_color_8j.html#a10fc91fed991c3435af7c6fa20af0dbd">CPColorWithImages</a>()
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087     <span class="keywordflow">if</span> (arguments.length &lt; 3)
<a name="l00088"></a>00088     {
<a name="l00089"></a>00089         var slices = arguments[0],
<a name="l00090"></a>00090             imageSlices = [];
<a name="l00091"></a>00091 
<a name="l00092"></a>00092         <span class="keywordflow">for</span> (var i = 0; i &lt; slices.length; ++i)
<a name="l00093"></a>00093         {
<a name="l00094"></a>00094             var slice = slices[i];
<a name="l00095"></a>00095 
<a name="l00096"></a>00096             imageSlices.push(slice ? <a class="code" href="_c_p_image_8j.html#ad0654656c8a478ceb27e5b42a1b15fa0">CPImageInBundle</a>(slice[0], CGSizeMake(slice[1], slice[2]), slice[3]) : nil);
<a name="l00097"></a>00097         }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099         <span class="keywordflow">if</span> (imageSlices.length === 3)
<a name="l00100"></a>00100             <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> colorWithPatternImage:[[<a class="code" href="class_c_p_three_part_image.html">CPThreePartImage</a> alloc] initWithImageSlices:imageSlices isVertical:arguments[1] || <a class="code" href="_c_p_color_8j.html#a6a3a6ea559bd16018cf4baaf3b9cf5e6">CPColorPatternIsHorizontal</a>]];
<a name="l00101"></a>00101         <span class="keywordflow">else</span>
<a name="l00102"></a>00102             <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> colorWithPatternImage:[[<a class="code" href="class_c_p_nine_part_image.html">CPNinePartImage</a> alloc] initWithImageSlices:imageSlices]];
<a name="l00103"></a>00103     }
<a name="l00104"></a>00104     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arguments.length === 3 || arguments.length === 4)
<a name="l00105"></a>00105     {
<a name="l00106"></a>00106         <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> colorWithPatternImage:<a class="code" href="_c_p_image_8j.html#ad0654656c8a478ceb27e5b42a1b15fa0">CPImageInBundle</a>(arguments[0], CGSizeMake(arguments[1], arguments[2]), arguments[3])];
<a name="l00107"></a>00107     }
<a name="l00108"></a>00108     <span class="keywordflow">else</span>
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110         <span class="keywordflow">return</span> nil;
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00123"></a>00123 <span class="keyword">@implementation </span><a class="code" href="interface_c_p_color.html">CPColor</a> : <a class="code" href="class_c_p_object.html" title="The root class from which most classes are subclassed.">CPObject</a>
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125     <a class="code" href="interface_c_p_array.html" title="A mutable array backed by a JavaScript Array.A mutable array class backed by a JavaScript Array...">CPArray</a>     _components;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <a class="code" href="interface_c_p_image.html">CPImage</a>     _patternImage;
<a name="l00128"></a>00128     <a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>    _cssString;
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00144"></a><a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">00144</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithRed:(<span class="keywordtype">float</span>)red green:(<span class="keywordtype">float</span>)green blue:(<span class="keywordtype">float</span>)blue alpha:(<span class="keywordtype">float</span>)alpha
<a name="l00145"></a>00145 {
<a name="l00146"></a>00146     <span class="keywordflow">return</span> [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[red, green, blue, alpha]];
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00164"></a><a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">00164</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithCalibratedRed:(<span class="keywordtype">float</span>)red green:(<span class="keywordtype">float</span>)green blue:(<span class="keywordtype">float</span>)blue alpha:(<span class="keywordtype">float</span>)alpha
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">colorWithRed</a>:red <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">green</a>:green <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">blue</a>:blue <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">alpha</a>:alpha];
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 
<a name="l00179"></a><a class="code" href="interface_c_p_color.html#a44c2d549f42537acc3e3a600946653c5">00179</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithWhite:(<span class="keywordtype">float</span>)white alpha:(<span class="keywordtype">float</span>)alpha
<a name="l00180"></a>00180 {
<a name="l00181"></a>00181     <span class="keywordflow">return</span> [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[white, white, white, alpha]];
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 
<a name="l00195"></a><a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">00195</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithCalibratedWhite:(<span class="keywordtype">float</span>)white alpha:(<span class="keywordtype">float</span>)alpha
<a name="l00196"></a>00196 {
<a name="l00197"></a>00197     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#a44c2d549f42537acc3e3a600946653c5">colorWithWhite</a>:white <a class="code" href="interface_c_p_color.html#a44c2d549f42537acc3e3a600946653c5">alpha</a>:alpha];
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00209"></a><a class="code" href="interface_c_p_color.html#a037edf0c131e5164485d7282c3c13836">00209</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithHue:(<span class="keywordtype">float</span>)hue saturation:(<span class="keywordtype">float</span>)saturation brightness:(<span class="keywordtype">float</span>)brightness
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#abcd2614cee40b8e7ed27db2809df99e7">colorWithHue</a>:hue <a class="code" href="interface_c_p_color.html#abcd2614cee40b8e7ed27db2809df99e7">saturation</a>:saturation <a class="code" href="interface_c_p_color.html#abcd2614cee40b8e7ed27db2809df99e7">brightness</a>:brightness <a class="code" href="interface_c_p_color.html#abcd2614cee40b8e7ed27db2809df99e7">alpha</a>:1.0];
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="interface_c_p_color.html#abcd2614cee40b8e7ed27db2809df99e7">00214</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithHue:(<span class="keywordtype">float</span>)hue saturation:(<span class="keywordtype">float</span>)saturation brightness:(<span class="keywordtype">float</span>)brightness alpha:(<span class="keywordtype">float</span>)alpha
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216     <span class="keywordflow">if</span> (saturation === 0.0)
<a name="l00217"></a>00217         <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">colorWithCalibratedWhite</a>:brightness / 100.0 <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">alpha</a>:alpha];
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     var f = hue % 60,
<a name="l00220"></a>00220         p = (brightness * (100 - saturation)) / 10000,
<a name="l00221"></a>00221         q = (brightness * (6000 - saturation * f)) / 600000,
<a name="l00222"></a>00222         t = (brightness * (6000 - saturation * (60 -f))) / 600000,
<a name="l00223"></a>00223         b =  brightness / 100.0;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="keywordflow">switch</span> (FLOOR(hue / 60))
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227         <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">colorWithCalibratedRed</a>: b <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">green</a>: t <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">blue</a>: p <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">alpha</a>: alpha];
<a name="l00228"></a>00228         <span class="keywordflow">case</span> 1: <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">colorWithCalibratedRed</a>: q <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">green</a>: b <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">blue</a>: p <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">alpha</a>: alpha];
<a name="l00229"></a>00229         <span class="keywordflow">case</span> 2: <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">colorWithCalibratedRed</a>: p <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">green</a>: b <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">blue</a>: t <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">alpha</a>: alpha];
<a name="l00230"></a>00230         <span class="keywordflow">case</span> 3: <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">colorWithCalibratedRed</a>: p <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">green</a>: q <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">blue</a>: b <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">alpha</a>: alpha];
<a name="l00231"></a>00231         <span class="keywordflow">case</span> 4: <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">colorWithCalibratedRed</a>: t <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">green</a>: p <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">blue</a>: b <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">alpha</a>: alpha];
<a name="l00232"></a>00232         <span class="keywordflow">case</span> 5: <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">colorWithCalibratedRed</a>: b <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">green</a>: p <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">blue</a>: q <a class="code" href="interface_c_p_color.html#af9145a17ecd5fb98a399aa6f81ae3133">alpha</a>: alpha];
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234 }
<a name="l00235"></a>00235 
<a name="l00246"></a><a class="code" href="interface_c_p_color.html#a80c4273ef2d3bb9cc836946de79c8a1e">00246</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithHexString:(<span class="keywordtype">string</span>)hex
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248     var rgba = hexToRGB(hex);
<a name="l00249"></a>00249     <span class="keywordflow">return</span> rgba ? [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA: rgba] : null;
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00255"></a><a class="code" href="interface_c_p_color.html#af4256861f8efbb374ca50d576f42e931">00255</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)blackColor
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257     <span class="keywordflow">if</span> (!cachedBlackColor)
<a name="l00258"></a>00258         cachedBlackColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.0, 0.0, 0.0, 1.0]];
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="keywordflow">return</span> cachedBlackColor;
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 
<a name="l00266"></a><a class="code" href="interface_c_p_color.html#a3118e8774e8440685054b18ced4f71f2">00266</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)blueColor
<a name="l00267"></a>00267 {
<a name="l00268"></a>00268     <span class="keywordflow">if</span> (!cachedBlueColor)
<a name="l00269"></a>00269         cachedBlueColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.0, 0.0, 1.0, 1.0]];
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     <span class="keywordflow">return</span> cachedBlueColor;
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00277"></a><a class="code" href="interface_c_p_color.html#ac4d591a152b4ec8d40242dce4a317f28">00277</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)darkGrayColor
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279     <span class="keywordflow">if</span> (!cachedDarkGrayColor)
<a name="l00280"></a>00280         cachedDarkGrayColor = [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">colorWithCalibratedWhite</a>:1.0 / 3.0 <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">alpha</a>:1.0];
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="keywordflow">return</span> cachedDarkGrayColor;
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00288"></a><a class="code" href="interface_c_p_color.html#a319bf37d8c2bbd1cd5d07f107a608be8">00288</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)grayColor
<a name="l00289"></a>00289 {
<a name="l00290"></a>00290     <span class="keywordflow">if</span> (!cachedGrayColor)
<a name="l00291"></a>00291         cachedGrayColor = [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">colorWithCalibratedWhite</a>:0.5 <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">alpha</a>: 1.0];
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <span class="keywordflow">return</span> cachedGrayColor;
<a name="l00294"></a>00294 }
<a name="l00295"></a>00295 
<a name="l00299"></a><a class="code" href="interface_c_p_color.html#ac0573c076293a3beea1d22b3882f1a4f">00299</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)greenColor
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301     <span class="keywordflow">if</span> (!cachedGreenColor)
<a name="l00302"></a>00302         cachedGreenColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.0, 1.0, 0.0, 1.0]];
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="keywordflow">return</span> cachedGreenColor;
<a name="l00305"></a>00305 }
<a name="l00306"></a>00306 
<a name="l00310"></a><a class="code" href="interface_c_p_color.html#aab0258a09118a04d49d3b52427421b20">00310</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)lightGrayColor
<a name="l00311"></a>00311 {
<a name="l00312"></a>00312     <span class="keywordflow">if</span> (!cachedLightGrayColor)
<a name="l00313"></a>00313         cachedLightGrayColor = [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">colorWithCalibratedWhite</a>:2.0 / 3.0 <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">alpha</a>:1.0];
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="keywordflow">return</span> cachedLightGrayColor;
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00321"></a><a class="code" href="interface_c_p_color.html#aa189077299bfd43aa7abc443e24ed221">00321</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)redColor
<a name="l00322"></a>00322 {
<a name="l00323"></a>00323     <span class="keywordflow">if</span> (!cachedRedColor)
<a name="l00324"></a>00324         cachedRedColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[1.0, 0.0, 0.0, 1.0]];
<a name="l00325"></a>00325 
<a name="l00326"></a>00326     <span class="keywordflow">return</span> cachedRedColor;
<a name="l00327"></a>00327 }
<a name="l00328"></a>00328 
<a name="l00332"></a><a class="code" href="interface_c_p_color.html#a713287464015f76e4359aeedc0110dc5">00332</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)whiteColor
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334     <span class="keywordflow">if</span> (!cachedWhiteColor)
<a name="l00335"></a>00335         cachedWhiteColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[1.0, 1.0, 1.0, 1.0]];
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     <span class="keywordflow">return</span> cachedWhiteColor;
<a name="l00338"></a>00338 }
<a name="l00339"></a>00339 
<a name="l00343"></a><a class="code" href="interface_c_p_color.html#a76410df22a14d10a7e3a70d7b959f29c">00343</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)yellowColor
<a name="l00344"></a>00344 {
<a name="l00345"></a>00345     <span class="keywordflow">if</span> (!cachedYellowColor)
<a name="l00346"></a>00346         cachedYellowColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[1.0, 1.0, 0.0, 1.0]];
<a name="l00347"></a>00347 
<a name="l00348"></a>00348     <span class="keywordflow">return</span> cachedYellowColor;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00354"></a><a class="code" href="interface_c_p_color.html#a107046a01274b53fd76ea8e7962468bb">00354</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)brownColor
<a name="l00355"></a>00355 {
<a name="l00356"></a>00356     <span class="keywordflow">if</span> (!cachedBrownColor)
<a name="l00357"></a>00357         cachedBrownColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.6, 0.4, 0.2, 1.0]];
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="keywordflow">return</span> cachedBrownColor;
<a name="l00360"></a>00360 }
<a name="l00361"></a>00361 
<a name="l00365"></a><a class="code" href="interface_c_p_color.html#a61e2cb4c879d3377599b90637cacc80f">00365</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)cyanColor
<a name="l00366"></a>00366 {
<a name="l00367"></a>00367     <span class="keywordflow">if</span> (!cachedCyanColor)
<a name="l00368"></a>00368         cachedCyanColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.0, 1.0, 1.0, 1.0]];
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <span class="keywordflow">return</span> cachedCyanColor;
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00376"></a><a class="code" href="interface_c_p_color.html#ae28c2eb6dd320df77294485f2c5f7cc7">00376</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)magentaColor
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378     <span class="keywordflow">if</span> (!cachedMagentaColor)
<a name="l00379"></a>00379         cachedMagentaColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[1.0, 0.0, 1.0, 1.0]];
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     <span class="keywordflow">return</span> cachedMagentaColor;
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00387"></a><a class="code" href="interface_c_p_color.html#a7394e12e6675087fc735fed2a71ab035">00387</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)orangeColor
<a name="l00388"></a>00388 {
<a name="l00389"></a>00389     <span class="keywordflow">if</span> (!cachedOrangeColor)
<a name="l00390"></a>00390         cachedOrangeColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[1.0, 0.5, 0.0, 1.0]];
<a name="l00391"></a>00391 
<a name="l00392"></a>00392     <span class="keywordflow">return</span> cachedOrangeColor;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00398"></a><a class="code" href="interface_c_p_color.html#a827a6f76ea2f07bbebd874154a5d9404">00398</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)purpleColor
<a name="l00399"></a>00399 {
<a name="l00400"></a>00400     <span class="keywordflow">if</span> (!cachedPurpleColor)
<a name="l00401"></a>00401         cachedPurpleColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.5, 0.0, 0.5, 1.0]];
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="keywordflow">return</span> cachedPurpleColor;
<a name="l00404"></a>00404 }
<a name="l00405"></a>00405 
<a name="l00410"></a><a class="code" href="interface_c_p_color.html#a7eb6f851e78c8fd80d6785086eb474c5">00410</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)shadowColor
<a name="l00411"></a>00411 {
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (!cachedShadowColor)
<a name="l00413"></a>00413         cachedShadowColor = [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.0, 0.0, 0.0, 1.0 / 3.0]];
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     <span class="keywordflow">return</span> cachedShadowColor;
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00422"></a><a class="code" href="interface_c_p_color.html#a89743805aa7a7ab79df291661fc4a736">00422</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)clearColor
<a name="l00423"></a>00423 {
<a name="l00424"></a>00424     <span class="keywordflow">if</span> (!cachedClearColor)
<a name="l00425"></a>00425         cachedClearColor = [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">colorWithCalibratedWhite</a>:0.0 <a class="code" href="interface_c_p_color.html#aa833ca4d353c6a9854c2386f13a17680">alpha</a>:0.0];
<a name="l00426"></a>00426 
<a name="l00427"></a>00427     <span class="keywordflow">return</span> cachedClearColor;
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="interface_c_p_color.html#a27503e1410f08b532943e10a98f93f6c">00430</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)alternateSelectedControlColor
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432     <span class="keywordflow">return</span> [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.22, 0.46, 0.84, 1.0]];
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00435"></a><a class="code" href="interface_c_p_color.html#af54d057393bde8870addc1c6ab5edc6a">00435</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)secondarySelectedControlColor
<a name="l00436"></a>00436 {
<a name="l00437"></a>00437     <span class="keywordflow">return</span> [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithRGBA:[0.83, 0.83, 0.83, 1.0]];
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00445"></a><a class="code" href="interface_c_p_color.html#a751cf2c0dca330a75cc254ff2ccc05f0">00445</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithPatternImage:(<a class="code" href="interface_c_p_image.html">CPImage</a>)anImage
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447     <span class="keywordflow">return</span> [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithPatternImage:anImage];
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00456"></a><a class="code" href="interface_c_p_color.html#a02a1ae39c4e62f361cb892efe96df3aa">00456</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithCSSString:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aString
<a name="l00457"></a>00457 {
<a name="l00458"></a>00458     <span class="keywordflow">return</span> [[<a class="code" href="interface_c_p_color.html">CPColor</a> alloc] _initWithCSSString: aString];
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 <span class="comment">/* @ignore */</span>
<a name="l00462"></a>00462 - (id)_initWithCSSString:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aString
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464     <span class="keywordflow">if</span> (aString.indexOf(<span class="stringliteral">&quot;rgb&quot;</span>) == <a class="code" href="_c_p_obj_j_runtime_8j.html#a84e3be579b365cc2c1559e1a1f469238">CPNotFound</a>)
<a name="l00465"></a>00465         <span class="keywordflow">return</span> nil;
<a name="l00466"></a>00466 
<a name="l00467"></a>00467     <span class="keyword">self</span> = [<span class="keyword">super</span> init];
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     var startingIndex = aString.indexOf(<span class="stringliteral">&quot;(&quot;</span>),
<a name="l00470"></a>00470         parts = aString.substring(startingIndex + 1).split(<span class="charliteral">&#39;,&#39;</span>);
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     _components = [
<a name="l00473"></a>00473         parseInt(parts[0], 10) / 255.0,
<a name="l00474"></a>00474         parseInt(parts[1], 10) / 255.0,
<a name="l00475"></a>00475         parseInt(parts[2], 10) / 255.0,
<a name="l00476"></a>00476         parts[3] ? parseFloat(parts[3], 10) : 1.0
<a name="l00477"></a>00477     ];
<a name="l00478"></a>00478 
<a name="l00479"></a>00479     _cssString = aString;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <span class="comment">/* @ignore */</span>
<a name="l00485"></a>00485 - (id)_initWithRGBA:(<a class="code" href="interface_c_p_array.html" title="A mutable array backed by a JavaScript Array.A mutable array class backed by a JavaScript Array...">CPArray</a>)components
<a name="l00486"></a>00486 {
<a name="l00487"></a>00487     <span class="keyword">self</span> = [<span class="keyword">super</span> init];
<a name="l00488"></a>00488 
<a name="l00489"></a>00489     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00490"></a>00490     {
<a name="l00491"></a>00491         _components = components;
<a name="l00492"></a>00492 
<a name="l00493"></a>00493         var hasAlpha = <a class="code" href="_c_p_compatibility_8j.html#a1fbfe7ca6b2cef354ecfe78f6cfd6659">CPFeatureIsCompatible</a>(<a class="code" href="_c_p_compatibility_8j.html#a032b2c21e584ea4022c7523b945eac8a">CPCSSRGBAFeature</a>) &amp;&amp; _components[3] != 1.0;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495         _cssString = (hasAlpha ? <span class="stringliteral">&quot;rgba(&quot;</span> : <span class="stringliteral">&quot;rgb(&quot;</span>) +
<a name="l00496"></a>00496             parseInt(_components[0] * 255.0) + &quot;, &quot; +
<a name="l00497"></a>00497             parseInt(_components[1] * 255.0) + &quot;, &quot; +
<a name="l00498"></a>00498             parseInt(_components[2] * 255.0) +
<a name="l00499"></a>00499             (hasAlpha ?  (&quot;, &quot; + _components[3]) : &quot;&quot;) + &quot;)&quot;;
<a name="l00500"></a>00500     }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00503"></a>00503 }
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 <span class="comment">/* @ignore */</span>
<a name="l00506"></a>00506 - (id)_initWithPatternImage:(<a class="code" href="interface_c_p_image.html">CPImage</a>)anImage
<a name="l00507"></a>00507 {
<a name="l00508"></a>00508     <span class="keyword">self</span> = [<span class="keyword">super</span> init];
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00511"></a>00511     {
<a name="l00512"></a>00512         _patternImage = anImage;
<a name="l00513"></a>00513         _cssString = <span class="stringliteral">&quot;url(\&quot;&quot;</span> + [_patternImage filename] + &quot;\&quot;)&quot;;
<a name="l00514"></a>00514         _components = [0.0, 0.0, 0.0, 1.0];
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00518"></a>00518 }
<a name="l00519"></a>00519 
<a name="l00523"></a><a class="code" href="interface_c_p_color.html#a557f1003a3e0423bb4b70d6a15ee2897">00523</a> - (<a class="code" href="interface_c_p_image.html">CPImage</a>)patternImage
<a name="l00524"></a>00524 {
<a name="l00525"></a>00525     <span class="keywordflow">return</span> _patternImage;
<a name="l00526"></a>00526 }
<a name="l00527"></a>00527 
<a name="l00531"></a><a class="code" href="interface_c_p_color.html#abe20c401cd68c30be1cf2a0b7e2a2b3e">00531</a> - (float)alphaComponent
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533     <span class="keywordflow">return</span> _components[3];
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 
<a name="l00539"></a><a class="code" href="interface_c_p_color.html#ac5e82d0facda22c84df0f6557933d754">00539</a> - (float)blueComponent
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541     <span class="keywordflow">return</span> _components[2];
<a name="l00542"></a>00542 }
<a name="l00543"></a>00543 
<a name="l00547"></a><a class="code" href="interface_c_p_color.html#accf29cf4884436d3b4c3568fa0afb971">00547</a> - (float)greenComponent
<a name="l00548"></a>00548 {
<a name="l00549"></a>00549     <span class="keywordflow">return</span> _components[1];
<a name="l00550"></a>00550 }
<a name="l00551"></a>00551 
<a name="l00555"></a><a class="code" href="interface_c_p_color.html#a836136ed81b29fb5e366942e5ca713f9">00555</a> - (float)redComponent
<a name="l00556"></a>00556 {
<a name="l00557"></a>00557     <span class="keywordflow">return</span> _components[0];
<a name="l00558"></a>00558 }
<a name="l00559"></a>00559 
<a name="l00571"></a><a class="code" href="interface_c_p_color.html#a1e75843670613a049de20920a040d608">00571</a> - (<a class="code" href="interface_c_p_array.html" title="A mutable array backed by a JavaScript Array.A mutable array class backed by a JavaScript Array...">CPArray</a>)components
<a name="l00572"></a>00572 {
<a name="l00573"></a>00573     <span class="keywordflow">return</span> _components;
<a name="l00574"></a>00574 }
<a name="l00575"></a>00575 
<a name="l00583"></a><a class="code" href="interface_c_p_color.html#a495e277f99cf3fc04b6c4ec75a56be23">00583</a> - (<a class="code" href="interface_c_p_color.html">CPColor</a>)colorWithAlphaComponent:(<span class="keywordtype">float</span>)anAlphaComponent
<a name="l00584"></a>00584 {
<a name="l00585"></a>00585     var components = _components.slice();
<a name="l00586"></a>00586 
<a name="l00587"></a>00587     components[components.length - 1] = anAlphaComponent;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589     <span class="keywordflow">return</span> [[[<span class="keyword">self</span> class] alloc] _initWithRGBA:components];
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00602"></a><a class="code" href="interface_c_p_color.html#a0aafbe76686c84c6fb924a3ff22af3f8">00602</a> - (<a class="code" href="interface_c_p_array.html" title="A mutable array backed by a JavaScript Array.A mutable array class backed by a JavaScript Array...">CPArray</a>)hsbComponents
<a name="l00603"></a>00603 {
<a name="l00604"></a>00604     var red   = ROUND(_components[_redComponent] * 255.0),
<a name="l00605"></a>00605         green = ROUND(_components[_greenComponent] * 255.0),
<a name="l00606"></a>00606         blue  = ROUND(_components[_blueComponent] * 255.0);
<a name="l00607"></a>00607 
<a name="l00608"></a>00608     var max   = MAX(red, green, blue),
<a name="l00609"></a>00609         min   = MIN(red, green, blue),
<a name="l00610"></a>00610         delta = max - min;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612     var brightness = max / 255.0,
<a name="l00613"></a>00613         saturation = (max != 0) ? delta / max : 0;
<a name="l00614"></a>00614 
<a name="l00615"></a>00615     var hue;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617     <span class="keywordflow">if</span> (saturation == 0)
<a name="l00618"></a>00618     {
<a name="l00619"></a>00619         hue = 0;
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621     <span class="keywordflow">else</span>
<a name="l00622"></a>00622     {
<a name="l00623"></a>00623         var rr = (max - red) / delta,
<a name="l00624"></a>00624             gr = (max - green) / delta,
<a name="l00625"></a>00625             br = (max - blue) / delta;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627         <span class="keywordflow">if</span> (red == max)
<a name="l00628"></a>00628             hue = br - gr;
<a name="l00629"></a>00629         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (green == max)
<a name="l00630"></a>00630             hue = 2 + rr - br;
<a name="l00631"></a>00631         <span class="keywordflow">else</span>
<a name="l00632"></a>00632             hue = 4 + gr - rr;
<a name="l00633"></a>00633 
<a name="l00634"></a>00634         hue /= 6;
<a name="l00635"></a>00635         <span class="keywordflow">if</span> (hue &lt; 0)
<a name="l00636"></a>00636             hue++;
<a name="l00637"></a>00637     }
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <span class="keywordflow">return</span> [
<a name="l00640"></a>00640         ROUND(hue * 360.0),
<a name="l00641"></a>00641         ROUND(saturation * 100.0),
<a name="l00642"></a>00642         ROUND(brightness * 100.0)
<a name="l00643"></a>00643     ];
<a name="l00644"></a>00644 }
<a name="l00645"></a>00645 
<a name="l00655"></a><a class="code" href="interface_c_p_color.html#aa7a176ce96fff9732d7c4a32186128a1">00655</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)cssString
<a name="l00656"></a>00656 {
<a name="l00657"></a>00657     <span class="keywordflow">return</span> _cssString;
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00663"></a><a class="code" href="interface_c_p_color.html#a0f3e9b1b096991c5a6be67442530795a">00663</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)hexString
<a name="l00664"></a>00664 {
<a name="l00665"></a>00665     <span class="keywordflow">return</span> rgbToHex([<span class="keyword">self</span> redComponent], [<span class="keyword">self</span> greenComponent], [<span class="keyword">self</span> blueComponent]);
<a name="l00666"></a>00666 }
<a name="l00667"></a>00667 
<a name="l00668"></a><a class="code" href="interface_c_p_color.html#aa901a579ed7c8df795ea3a78aa52cc74">00668</a> - (BOOL)isEqual:(<a class="code" href="interface_c_p_color.html">CPColor</a>)aColor
<a name="l00669"></a>00669 {
<a name="l00670"></a>00670     <span class="keywordflow">if</span> (!aColor)
<a name="l00671"></a>00671         <span class="keywordflow">return</span> NO;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673     <span class="keywordflow">if</span> (aColor === <span class="keyword">self</span>)
<a name="l00674"></a>00674         <span class="keywordflow">return</span> YES;
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <span class="keywordflow">if</span> (![aColor isKindOfClass:<a class="code" href="interface_c_p_color.html">CPColor</a>])
<a name="l00677"></a>00677         <span class="keywordflow">return</span> NO;
<a name="l00678"></a>00678 
<a name="l00679"></a>00679     <span class="keywordflow">if</span> (_patternImage || [aColor patternImage])
<a name="l00680"></a>00680         <span class="keywordflow">return</span> [_patternImage isEqual:[aColor <a class="code" href="interface_c_p_color.html#a557f1003a3e0423bb4b70d6a15ee2897">patternImage</a>]];
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     <span class="comment">// We don&#39;t require the components to be equal beyond 8 bits since otherwise</span>
<a name="l00683"></a>00683     <span class="comment">// simple rounding errors will make two colours which are exactly the same on</span>
<a name="l00684"></a>00684     <span class="comment">// screen compare unequal.</span>
<a name="l00685"></a>00685     <span class="keywordflow">return</span> ROUND([<span class="keyword">self</span> redComponent] * 255.0) == ROUND([aColor redComponent] * 255.0) &amp;&amp;
<a name="l00686"></a>00686            ROUND([<span class="keyword">self</span> greenComponent] * 255.0) == ROUND([aColor greenComponent] * 255.0) &amp;&amp;
<a name="l00687"></a>00687            ROUND([<span class="keyword">self</span> blueComponent] * 255.0) == ROUND([aColor blueComponent] * 255.0) &amp;&amp;
<a name="l00688"></a>00688            [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#abe20c401cd68c30be1cf2a0b7e2a2b3e">alphaComponent</a>] == [aColor <a class="code" href="interface_c_p_color.html#abe20c401cd68c30be1cf2a0b7e2a2b3e">alphaComponent</a>];
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 
<a name="l00691"></a><a class="code" href="interface_c_p_color.html#a6ddceb98fd25bf912e1f1893e05320e6">00691</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)description
<a name="l00692"></a>00692 {
<a name="l00693"></a>00693     var description = [<span class="keyword">super</span> description],
<a name="l00694"></a>00694         patternImage = [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#a557f1003a3e0423bb4b70d6a15ee2897">patternImage</a>];
<a name="l00695"></a>00695 
<a name="l00696"></a>00696     <span class="keywordflow">if</span> (!patternImage)
<a name="l00697"></a>00697         <span class="keywordflow">return</span> description + <span class="stringliteral">&quot; &quot;</span> + [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#aa7a176ce96fff9732d7c4a32186128a1">cssString</a>];
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     description += <span class="stringliteral">&quot; {\n&quot;</span>;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701     <span class="keywordflow">if</span> ([patternImage isThreePartImage] || [patternImage isNinePartImage])
<a name="l00702"></a>00702     {
<a name="l00703"></a>00703         var slices = [<a class="code" href="interface_c_p_color.html#a557f1003a3e0423bb4b70d6a15ee2897">patternImage</a> imageSlices];
<a name="l00704"></a>00704 
<a name="l00705"></a>00705         <span class="keywordflow">if</span> ([patternImage isThreePartImage])
<a name="l00706"></a>00706             description += <span class="stringliteral">&quot;    orientation: &quot;</span> + ([<a class="code" href="interface_c_p_color.html#a557f1003a3e0423bb4b70d6a15ee2897">patternImage</a> isVertical] ? <span class="stringliteral">&quot;vertical&quot;</span> : <span class="stringliteral">&quot;horizontal&quot;</span>) + <span class="stringliteral">&quot;,\n&quot;</span>;
<a name="l00707"></a>00707 
<a name="l00708"></a>00708         description += <span class="stringliteral">&quot;    patternImage (&quot;</span> + slices.<a class="code" href="class_c_p_string.html#a995ca4d2f7167db0da2fad02a444ec73">length</a> + <span class="stringliteral">&quot; part): [\n&quot;</span>;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710         <span class="keywordflow">for</span> (var i = 0; i &lt; slices.length; ++i)
<a name="l00711"></a>00711         {
<a name="l00712"></a>00712             var imgDescription = [slices[i] description];
<a name="l00713"></a>00713 
<a name="l00714"></a>00714             description += imgDescription.replace(/^/mg, <span class="stringliteral">&quot;        &quot;</span>) + <span class="stringliteral">&quot;,\n&quot;</span>;
<a name="l00715"></a>00715         }
<a name="l00716"></a>00716 
<a name="l00717"></a>00717         description = description.substr(0, description.length - 2) + <span class="stringliteral">&quot;\n    ]\n}&quot;</span>;
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719     <span class="keywordflow">else</span>
<a name="l00720"></a>00720         description += [<a class="code" href="interface_c_p_color.html#a557f1003a3e0423bb4b70d6a15ee2897">patternImage</a> <a class="code" href="interface_c_p_image.html#a46fff33e7c4f1b62a55b3f0fbeb8dadc">description</a>].replace(/^/mg, <span class="stringliteral">&quot;    &quot;</span>) + <span class="stringliteral">&quot;\n}&quot;</span>;
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     <span class="keywordflow">return</span> description;
<a name="l00723"></a>00723 }
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 <span class="keyword">@end</span>
<a name="l00726"></a>00726 
<a name="l00727"></a>00727 <span class="keyword">@implementation </span><a class="code" href="interface_c_p_color.html">CPColor</a> (CoreGraphicsExtensions)
<a name="l00728"></a>00728 
<a name="l00732"></a><a class="code" href="interface_c_p_color.html#ac4e162f49b8b673f23511098656fea96">00732</a> - (void)<a class="code" href="interface_c_p_color.html#ac4e162f49b8b673f23511098656fea96">set</a>
<a name="l00733"></a>00733 {
<a name="l00734"></a>00734     [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#ae8b159769ea723137fd5b81c2a4f8d6b">setFill</a>];
<a name="l00735"></a>00735     [<span class="keyword">self</span> <a class="code" href="interface_c_p_color.html#a0ae00e1e4ee8f2e7f45228a628beb803">setStroke</a>];
<a name="l00736"></a>00736 }
<a name="l00737"></a>00737 
<a name="l00741"></a><a class="code" href="interface_c_p_color.html#ae8b159769ea723137fd5b81c2a4f8d6b">00741</a> - (void)<a class="code" href="interface_c_p_color.html#ae8b159769ea723137fd5b81c2a4f8d6b">setFill</a>
<a name="l00742"></a>00742 {
<a name="l00743"></a>00743     var ctx = [[<a class="code" href="interface_c_p_graphics_context.html">CPGraphicsContext</a> <a class="code" href="interface_c_p_graphics_context.html#a378dafc8fb951053dd6877fb45e87f61">currentContext</a>] <a class="code" href="interface_c_p_graphics_context.html#a92895bd939c04da463d02425bec83f0b">graphicsPort</a>];
<a name="l00744"></a>00744     <a class="code" href="group__coregraphics.html#ga800a3e5b0c46359d28b091376630bb0e">CGContextSetFillColor</a>(ctx, <span class="keyword">self</span>);
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00750"></a><a class="code" href="interface_c_p_color.html#a0ae00e1e4ee8f2e7f45228a628beb803">00750</a> - (void)<a class="code" href="interface_c_p_color.html#a0ae00e1e4ee8f2e7f45228a628beb803">setStroke</a>
<a name="l00751"></a>00751 {
<a name="l00752"></a>00752     var ctx = [[<a class="code" href="interface_c_p_graphics_context.html">CPGraphicsContext</a> <a class="code" href="interface_c_p_graphics_context.html#a378dafc8fb951053dd6877fb45e87f61">currentContext</a>] <a class="code" href="interface_c_p_graphics_context.html#a92895bd939c04da463d02425bec83f0b">graphicsPort</a>];
<a name="l00753"></a>00753     <a class="code" href="group__coregraphics.html#gac13f17a8bed76d16b9e5252106d196e0">CGContextSetStrokeColor</a>(ctx, <span class="keyword">self</span>);
<a name="l00754"></a>00754 }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756 <span class="keyword">@end</span>
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 <span class="keyword">@implementation </span><a class="code" href="interface_c_p_color.html">CPColor</a> (Debugging)
<a name="l00759"></a>00759 
<a name="l00760"></a><a class="code" href="interface_c_p_color.html#ad3377e757a24ade700f769da33f3000f">00760</a> + (<a class="code" href="interface_c_p_color.html">CPColor</a>)<a class="code" href="interface_c_p_color.html#ad3377e757a24ade700f769da33f3000f">randomColor</a>
<a name="l00761"></a>00761 {
<a name="l00762"></a>00762     <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_color.html">CPColor</a> <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">colorWithRed</a>:RAND() <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">green</a>:RAND() <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">blue</a>:RAND() <a class="code" href="interface_c_p_color.html#a53e6bdd0c0cba190891d19dd30ac36f1">alpha</a>:1.0];
<a name="l00763"></a>00763 }
<a name="l00764"></a>00764 
<a name="l00765"></a>00765 <span class="keyword">@end</span>
<a name="l00766"></a>00766 
<a name="l00768"></a>00768 var CPColorComponentsKey    = <span class="stringliteral">@&quot;CPColorComponentsKey&quot;</span>,
<a name="l00769"></a>00769     CPColorPatternImageKey  = <span class="stringliteral">@&quot;CPColorPatternImageKey&quot;</span>;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 <span class="keyword">@implementation </span><a class="code" href="interface_c_p_color.html">CPColor</a> (CPCoding)
<a name="l00773"></a>00773 
<a name="l00778"></a><a class="code" href="interface_c_p_color.html#a19d917f45bceb31b11adaf53dee2c9a8">00778</a> - (id)initWithCoder:(<a class="code" href="interface_c_p_coder.html" title="Defines methods for use when archiving &amp; restoring (enc/decoding).">CPCoder</a>)aCoder
<a name="l00779"></a>00779 {
<a name="l00780"></a>00780     <span class="keywordflow">if</span> ([aCoder containsValueForKey:CPColorPatternImageKey])
<a name="l00781"></a>00781         <span class="keywordflow">return</span> [<span class="keyword">self</span> _initWithPatternImage:[aCoder decodeObjectForKey:CPColorPatternImageKey]];
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     <span class="keywordflow">return</span> [<span class="keyword">self</span> _initWithRGBA:[aCoder decodeObjectForKey:CPColorComponentsKey]];
<a name="l00784"></a>00784 }
<a name="l00785"></a>00785 
<a name="l00790"></a><a class="code" href="interface_c_p_color.html#a3489e110b7eb9987c08f846f8afccb7e">00790</a> - (void)encodeWithCoder:(<a class="code" href="interface_c_p_coder.html" title="Defines methods for use when archiving &amp; restoring (enc/decoding).">CPCoder</a>)aCoder
<a name="l00791"></a>00791 {
<a name="l00792"></a>00792     <span class="keywordflow">if</span> (_patternImage)
<a name="l00793"></a>00793         [aCoder encodeObject:_patternImage forKey:CPColorPatternImageKey];
<a name="l00794"></a>00794     <span class="keywordflow">else</span>
<a name="l00795"></a>00795         [aCoder encodeObject:_components forKey:CPColorComponentsKey];
<a name="l00796"></a>00796 }
<a name="l00797"></a>00797 
<a name="l00798"></a>00798 <span class="keyword">@end</span>
<a name="l00799"></a>00799 
<a name="l00800"></a>00800 
<a name="l00802"></a>00802 var hexCharacters = <span class="stringliteral">&quot;0123456789ABCDEF&quot;</span>;
<a name="l00803"></a>00803 
<a name="l00804"></a>00804 <span class="comment">/*</span>
<a name="l00805"></a>00805 <span class="comment">    Used for the CPColor +colorWithHexString: implementation.</span>
<a name="l00806"></a>00806 <span class="comment">    Returns an array of rgb components.</span>
<a name="l00807"></a>00807 <span class="comment">*/</span>
<a name="l00808"></a>00808 var hexToRGB = function(hex)
<a name="l00809"></a>00809 {
<a name="l00810"></a>00810     <span class="keywordflow">if</span> (hex.length == 3)
<a name="l00811"></a>00811         hex = hex.charAt(0) + hex.charAt(0) + hex.charAt(1) + hex.charAt(1) + hex.charAt(2) + hex.charAt(2);
<a name="l00812"></a>00812 
<a name="l00813"></a>00813     <span class="keywordflow">if</span> (hex.length != 6)
<a name="l00814"></a>00814         <span class="keywordflow">return</span> null;
<a name="l00815"></a>00815 
<a name="l00816"></a>00816     hex = hex.toUpperCase();
<a name="l00817"></a>00817 
<a name="l00818"></a>00818     <span class="keywordflow">for</span> (var i = 0; i &lt; hex.length; i++)
<a name="l00819"></a>00819         <a class="code" href="_c_a_backing_store_8j.html#ad2b049b1f6911d2ffffc0769dfe601e4">if</a> (hexCharacters.indexOf(hex.charAt(i)) == -1)
<a name="l00820"></a>00820             return null;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822     var red   = (hexCharacters.indexOf(hex.charAt(0)) * 16 + hexCharacters.indexOf(hex.charAt(1))) / 255.0,
<a name="l00823"></a>00823         green = (hexCharacters.indexOf(hex.charAt(2)) * 16 + hexCharacters.indexOf(hex.charAt(3))) / 255.0,
<a name="l00824"></a>00824         blue  = (hexCharacters.indexOf(hex.charAt(4)) * 16 + hexCharacters.indexOf(hex.charAt(5))) / 255.0;
<a name="l00825"></a>00825 
<a name="l00826"></a>00826     <span class="keywordflow">return</span> [red, green, blue, 1.0];
<a name="l00827"></a>00827 };
<a name="l00828"></a>00828 
<a name="l00829"></a>00829 var rgbToHex = function(r,g,b)
<a name="l00830"></a>00830 {
<a name="l00831"></a>00831     <span class="keywordflow">return</span> byteToHex(r) + byteToHex(g) + byteToHex(b);
<a name="l00832"></a>00832 };
<a name="l00833"></a>00833 
<a name="l00834"></a>00834 var byteToHex = function(n)
<a name="l00835"></a>00835 {
<a name="l00836"></a>00836     <span class="keywordflow">if</span> (!n || isNaN(n))
<a name="l00837"></a>00837         <span class="keywordflow">return</span> <span class="stringliteral">&quot;00&quot;</span>;
<a name="l00838"></a>00838 
<a name="l00839"></a>00839     n = FLOOR(MIN(255, MAX(0, 256 * n)));
<a name="l00840"></a>00840 
<a name="l00841"></a>00841     <span class="keywordflow">return</span> hexCharacters.charAt((n - n % 16) / 16) +
<a name="l00842"></a>00842            hexCharacters.charAt(n % 16);
<a name="l00843"></a>00843 };
<a name="l00844"></a>00844 
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_c_p_color_8j.html">CPColor.j</a>      </li>
      <li class="footer">Generated on Wed Nov 16 2011 17:34:42 for API by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
